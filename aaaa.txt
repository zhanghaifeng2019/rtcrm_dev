■APIについて

・概要
媒体に設置する入力フォームのパーツを提供し、媒体サイトで
入力されたデータのチェックおよび送信データの受信を行います。

・例
ある商品を購入できるサイト(サービス元)があるとします。
APIを使用した媒体に設置する入力項目は下記とします。

・氏名　（自由入力　上限20文字　必須）
・メールアドレス　（自由入力　上限200文字　必須）
・電話番号 　（自由入力　電話番号形式　必須）
・都道府県　（選択　必須）
・市郡区　（自由入力　上限100文字　必須)
・町村（自由入力　上限100文字　必須)
・番地建物 （自由入力　上限100文字)

・商品名 (選択）
・個数　（選択)

媒体が購入フォームを作成するためには、選択式の場合は
選択項目をサービス元からリアルタイムで提供する必要が
あります。また、各項目の正当性は媒体サイトからサービス
元のサイトが受信して、チェックを行います。

■処理の流れ
１．ユーザー入力時
・氏名　APIへの通信は発生しません
・メールアドレス　APIへの通信は発生しません
・電話番号 　APIへの通信は発生しません
・都道府県　APIにアクセスして、サーバーは都道府県の一覧を返す必要があります。
・市郡区　APIへの通信は発生しません
・町村　APIへの通信は発生しません
・番地建物　APIへの通信は発生しません

・商品名 APIにアクセスして、サーバーは商品の一覧を返す必要があります。
・個数　APIにアクセスして、サーバーは選択可能な個数を返す必要があります。

２．ユーザーデータ送信時
・氏名　APIへの通信を行い、データの正当性をチェックします
・メールアドレス　APIへの通信を行い、データの正当性をチェックします
・電話番号 　APIへの通信を行い、データの正当性をチェックします
・都道府県　APIへの通信を行い、データの正当性をチェックします
・市郡区　APIへの通信を行い、データの正当性をチェックします
・町村　APIへの通信を行い、データの正当性をチェックします
・番地建物　APIへの通信を行い、データの正当性をチェックします

・商品名 APIへの通信を行い、商品情報を受信します
・個数　APIへの通信を行い、商品の在庫をチェックします

もしいずれかのチェックがNGだった場合、処理を進められない旨と
各項目に対するエラーメッセージを媒体サイトに戻します。

問題がなければ、そのまま登録を完了し、購入完了を媒体サイト
に送信します。

＃媒体、サービス元での情報のやり取りを視覚化すると下記のようになります

・フォーム要素の取得
媒体サイト-->API経由で都道府県のリストを要求--->サービス元
　　　　　　　　　　　　　　　　　　　　　　　　　　　　↓
　　　　　　　　　　　　　　　　　　　都道府県のリストを生成
　　　　　　　　　　　　　　　　　　　　　　　　　　　　↓
媒体サイト<-------------都道府県リスト----------サービス元
↓
そのリストを使用して都道府県のドロップダウンリストを作成します
※その他の選択項目も同様です。

・入力データが送信されば場合のチェック
媒体サイト-->API経由で入力データを送信--------->サービス元
　　　　　　　　　　　　　　　　　　　　　　　　　　　　↓
　　　　　　　　　　　　　　　　　　　　入力データチェック
　　　　　　　　　　　　　　　　　　　　　　　　　　　　↓
　　　　　　　　　　　　　　都道府県が選択されていない、
　　　　　　　　　　　　　　メールアドレス形式が誤ってる等
　　　　　　　　　　　　　　　　　　　　　　　　　　　　↓
媒体サイト<----処理の中止とエラーメッセージ-----サービス元
↓
媒体サイトはエラーメッセージをフォームに表示します。











